{"ast":null,"code":"import{React,useState,useContext}from\"react\";import{AlertsContext}from\"../context/Alerts\";import{useNavigate}from\"react-router-dom\";import{SuccessContext}from\"../context/Success\";import{UserContext}from\"../context/User\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const serverUrl=process.env.REACT_APP_SERVER_URL;function Login(_ref){let{theme}=_ref;const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[loading,setLoading]=useState(false);const[errors,setErrors]=useContext(AlertsContext);const[success,setSuccess]=useContext(SuccessContext);const[user,setUser]=useContext(UserContext);const navigate=useNavigate();const handleLogin=e=>{e.preventDefault();setLoading(true);setErrors([]);// form validation\nif(!email.trim()||!password.trim()){setErrors(prevErrors=>[...prevErrors,\"Please fill all the fields\"]);setLoading(false);return;}axios.post(`${serverUrl}/auth/login`,{email:email,password:password},{headers:{\"Content-Type\":\"application/json\"}}).then(response=>{localStorage.setItem(\"authToken\",response.data.token);localStorage.setItem(\"refreshToken\",response.data.refreshToken);setUser(response.data.account);setEmail(\"\");setPassword(\"\");setErrors([]);setSuccess(false);setLoading(false);document.getElementById(\"sign_up_modal\").close();navigate(\"/app\");}).catch(error=>{setSuccess(false);if(error.message==\"Network Error\"){console.log(error);setErrors([\"Network Error\"]);}else{setErrors(error.response.data.errors.map(error=>error.msg));setLoading(false);}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"dialog\",{id:\"sign_in_modal\",className:\"modal backdrop-brightness-50 z-30 flex flex-grow w-screen place-self-center fixed  h-screen place-items-center \",children:/*#__PURE__*/_jsxs(\"div\",{className:`w-80 max-w-sm justify-center sm:w-full place-self-center px-4 pt-1 pb-4  mx-auto border border-gray-200 rounded-lg shadow sm:p-6 md:p-8 md:pt-4 ${theme===\"night\"?\"bg-night text-white\":\"bg-fantasy text-night\"}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full  \",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex-2 w-full \"}),/*#__PURE__*/_jsx(\"button\",{id:\"btn_sign_in_modal_close\",onClick:()=>document.getElementById(\"sign_in_modal\").close(),className:\"flex-1 hover:underline mt-2  \",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-x \"})})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-4\",action:\"#\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-xl text-center font-medium \",children:\"Sign in\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"email\",className:\"block mb-2 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-regular fa-envelope mr-2\"}),\"Email\"]}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",id:\"email\",className:\"bg-gray-50 border border-gray-300  text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 text-night \",placeholder:\"example@gmail.com\",required:true,value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"password\",className:\"block mb-2 text-sm font-medium \",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-shield-halved mr-2\"}),\"Password\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-row gap-5  w-full\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",id:\"password\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",className:\"flex-2 bg-gray-50 border border-gray-300  text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 text-night \",required:true,value:password,onChange:e=>setPassword(e.target.value)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start\"}),/*#__PURE__*/_jsx(\"a\",{id:\"btn_forget_password_modal\",onClick:()=>{document.getElementById(\"forget_password_modal\").show();document.getElementById(\"sign_in_modal\").close();},className:\"ms-auto text-sm cursor-pointer text-blue-700 hover:underline dark:text-blue-500\",children:\"Forgot Password?\"})]}),/*#__PURE__*/_jsx(\"button\",{id:\"btn_login\",onClick:handleLogin,type:\"button\",className:\"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\",children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"div\",{className:`ms-2 text-sm font-medium  ${theme===\"night\"?\"text-gray-500\":\"text-gray-900\"}}`,children:[\"Not registered?\",\" \",/*#__PURE__*/_jsx(\"a\",{id:\"btn_sign_up_modal\",onClick:()=>{document.getElementById(\"sign_in_modal\").close();document.getElementById(\"sign_up_modal\").show();},href:\"#\",className:\"text-blue-700 hover:underline dark:text-blue-500\",children:\"Create account\"})]})]})]})})});}export default Login;","map":{"version":3,"names":["React","useState","useContext","AlertsContext","useNavigate","SuccessContext","UserContext","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","serverUrl","process","env","REACT_APP_SERVER_URL","Login","_ref","theme","email","setEmail","password","setPassword","loading","setLoading","errors","setErrors","success","setSuccess","user","setUser","navigate","handleLogin","e","preventDefault","trim","prevErrors","post","headers","then","response","localStorage","setItem","data","token","refreshToken","account","document","getElementById","close","catch","error","message","console","log","map","msg","children","id","className","onClick","action","htmlFor","name","placeholder","required","value","onChange","target","type","show","href"],"sources":["D:/PUGADMAHARLIKA/Pugad-Maharlika-Frontend/client/src/components/Login.jsx"],"sourcesContent":["import { React, useState, useContext } from \"react\";\r\nimport { AlertsContext } from \"../context/Alerts\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { SuccessContext } from \"../context/Success\";\r\nimport { UserContext } from \"../context/User\";\r\nimport axios from \"axios\";\r\n\r\nconst serverUrl = process.env.REACT_APP_SERVER_URL;\r\n\r\nfunction Login({ theme }) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useContext(AlertsContext);\r\n  const [success, setSuccess] = useContext(SuccessContext);\r\n  const [user, setUser] = useContext(UserContext);\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setErrors([]);\r\n\r\n    // form validation\r\n    if (!email.trim() || !password.trim()) {\r\n      setErrors((prevErrors) => [...prevErrors, \"Please fill all the fields\"]);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    axios\r\n      .post(\r\n        `${serverUrl}/auth/login`,\r\n        { email: email, password: password },\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      )\r\n      .then((response) => {\r\n        localStorage.setItem(\"authToken\", response.data.token);\r\n        localStorage.setItem(\"refreshToken\", response.data.refreshToken);\r\n        setUser(response.data.account);\r\n        setEmail(\"\");\r\n        setPassword(\"\");\r\n        setErrors([]);\r\n        setSuccess(false);\r\n        setLoading(false);\r\n        document.getElementById(\"sign_up_modal\").close();\r\n        navigate(\"/app\");\r\n      })\r\n      .catch((error) => {\r\n        setSuccess(false);\r\n        if (error.message == \"Network Error\") {\r\n          console.log(error);\r\n          setErrors([\"Network Error\"]);\r\n        } else {\r\n          setErrors(error.response.data.errors.map((error) => error.msg));\r\n          setLoading(false);\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <dialog\r\n        id=\"sign_in_modal\"\r\n        className=\"modal backdrop-brightness-50 z-30 flex flex-grow w-screen place-self-center fixed  h-screen place-items-center \"\r\n      >\r\n        <div\r\n          className={`w-80 max-w-sm justify-center sm:w-full place-self-center px-4 pt-1 pb-4  mx-auto border border-gray-200 rounded-lg shadow sm:p-6 md:p-8 md:pt-4 ${\r\n            theme === \"night\" ? \"bg-night text-white\" : \"bg-fantasy text-night\"\r\n          }`}\r\n        >\r\n          <div className=\"flex w-full  \">\r\n            <span className=\"flex-2 w-full \"></span>\r\n            <button\r\n              id=\"btn_sign_in_modal_close\"\r\n              onClick={() => document.getElementById(\"sign_in_modal\").close()}\r\n              className=\"flex-1 hover:underline mt-2  \"\r\n            >\r\n              <i className=\"fa-solid fa-x \"></i>\r\n            </button>\r\n          </div>\r\n          <form className=\"space-y-4\" action=\"#\">\r\n            <h5 className=\"text-xl text-center font-medium \">Sign in</h5>\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block mb-2 text-sm font-medium\">\r\n                <i className=\"fa-regular fa-envelope mr-2\"></i>\r\n                Email\r\n              </label>\r\n              <input\r\n                name=\"email\"\r\n                id=\"email\"\r\n                className=\"bg-gray-50 border border-gray-300  text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 text-night \"\r\n                placeholder=\"example@gmail.com\"\r\n                required\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block mb-2 text-sm font-medium \">\r\n                <i className=\"fa-solid fa-shield-halved mr-2\"></i>\r\n                Password\r\n              </label>\r\n              <div className=\"flex flex-row gap-5  w-full\">\r\n                <input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  id=\"password\"\r\n                  placeholder=\"••••••••\"\r\n                  className=\"flex-2 bg-gray-50 border border-gray-300  text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 text-night \"\r\n                  required\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-start\">\r\n              <div className=\"flex items-start\"></div>\r\n              <a\r\n                id=\"btn_forget_password_modal\"\r\n                onClick={() => {\r\n                  document.getElementById(\"forget_password_modal\").show();\r\n                  document.getElementById(\"sign_in_modal\").close();\r\n                }}\r\n                className=\"ms-auto text-sm cursor-pointer text-blue-700 hover:underline dark:text-blue-500\"\r\n              >\r\n                Forgot Password?\r\n              </a>\r\n            </div>\r\n            <button\r\n              id=\"btn_login\"\r\n              onClick={handleLogin}\r\n              type=\"button\"\r\n              className=\"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\"\r\n            >\r\n              Sign In\r\n            </button>\r\n            <div\r\n              className={`ms-2 text-sm font-medium  ${\r\n                theme === \"night\" ? \"text-gray-500\" : \"text-gray-900\"\r\n              }}`}\r\n            >\r\n              Not registered?{\" \"}\r\n              <a\r\n                id=\"btn_sign_up_modal\"\r\n                onClick={() => {\r\n                  document.getElementById(\"sign_in_modal\").close();\r\n                  document.getElementById(\"sign_up_modal\").show();\r\n                }}\r\n                href=\"#\"\r\n                className=\"text-blue-700 hover:underline dark:text-blue-500\"\r\n              >\r\n                Create account\r\n              </a>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}