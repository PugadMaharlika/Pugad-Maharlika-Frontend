{"ast":null,"code":"import axios from\"axios\";const UploadImage=(file,setSuccess,setErrors,setCallback,user)=>{if(!file){setSuccess(false);setErrors([\"No file selected. Please select an image file\"]);return false;}// Check file type (case-insensitive)\nconst allowedTypes=[\"image/png\",\"image/jpeg\",\"image/jpg\"];if(!allowedTypes.includes(file.type.toLowerCase())){setSuccess(false);setErrors([\"Invalid file type. Only PNG, JPG, and JPEG are allowed\"]);return false;}// Check file size (less than or equal to 5 MB)\nconst maxSize=5*1024*1024;// 5 MB in bytes\nif(file.size>maxSize){setSuccess(false);setErrors([\"File size exceeds 5 MB. Please choose a smaller file.\"]);return false;}const formData=new FormData();const file_name=user.id+user.dateCreated+file.name;// Create a new file with the updated name\nconst newFile=new File([file],file_name,{type:file.type});formData.append(\"file\",newFile);formData.append(\"upload_preset\",\"bly6md1o\");axios.post(\"https://api.cloudinary.com/v1_1/dchcpwbya/upload\",formData).then(response=>{setSuccess(true);setErrors([\"Image uploaded successfully.\"]);setCallback(response.data.url);});};export default UploadImage;","map":{"version":3,"names":["axios","UploadImage","file","setSuccess","setErrors","setCallback","user","allowedTypes","includes","type","toLowerCase","maxSize","size","formData","FormData","file_name","id","dateCreated","name","newFile","File","append","post","then","response","data","url"],"sources":["D:/PUGADMAHARLIKA/Pugad-Maharlika-Frontend/client/src/service/UploadImage.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst UploadImage = (file, setSuccess, setErrors, setCallback, user) => {\r\n  if (!file) {\r\n    setSuccess(false);\r\n    setErrors([\"No file selected. Please select an image file\"]);\r\n    return false;\r\n  }\r\n\r\n  // Check file type (case-insensitive)\r\n  const allowedTypes = [\"image/png\", \"image/jpeg\", \"image/jpg\"];\r\n  if (!allowedTypes.includes(file.type.toLowerCase())) {\r\n    setSuccess(false);\r\n    setErrors([\"Invalid file type. Only PNG, JPG, and JPEG are allowed\"]);\r\n    return false;\r\n  }\r\n\r\n  // Check file size (less than or equal to 5 MB)\r\n  const maxSize = 5 * 1024 * 1024; // 5 MB in bytes\r\n  if (file.size > maxSize) {\r\n    setSuccess(false);\r\n    setErrors([\"File size exceeds 5 MB. Please choose a smaller file.\"]);\r\n    return false;\r\n  }\r\n\r\n  const formData = new FormData();\r\n  const file_name = user.id + user.dateCreated + file.name;\r\n\r\n  // Create a new file with the updated name\r\n  const newFile = new File([file], file_name, { type: file.type });\r\n\r\n  formData.append(\"file\", newFile);\r\n  formData.append(\"upload_preset\", \"bly6md1o\");\r\n\r\n  axios.post(\"https://api.cloudinary.com/v1_1/dchcpwbya/upload\", formData).then((response) => {\r\n    setSuccess(true);\r\n    setErrors([\"Image uploaded successfully.\"]);\r\n    setCallback(response.data.url);\r\n  });\r\n};\r\n\r\nexport default UploadImage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,WAAW,CAAGA,CAACC,IAAI,CAAEC,UAAU,CAAEC,SAAS,CAAEC,WAAW,CAAEC,IAAI,GAAK,CACtE,GAAI,CAACJ,IAAI,CAAE,CACTC,UAAU,CAAC,KAAK,CAAC,CACjBC,SAAS,CAAC,CAAC,+CAA+C,CAAC,CAAC,CAC5D,MAAO,MAAK,CACd,CAEA;AACA,KAAM,CAAAG,YAAY,CAAG,CAAC,WAAW,CAAE,YAAY,CAAE,WAAW,CAAC,CAC7D,GAAI,CAACA,YAAY,CAACC,QAAQ,CAACN,IAAI,CAACO,IAAI,CAACC,WAAW,CAAC,CAAC,CAAC,CAAE,CACnDP,UAAU,CAAC,KAAK,CAAC,CACjBC,SAAS,CAAC,CAAC,wDAAwD,CAAC,CAAC,CACrE,MAAO,MAAK,CACd,CAEA;AACA,KAAM,CAAAO,OAAO,CAAG,CAAC,CAAG,IAAI,CAAG,IAAI,CAAE;AACjC,GAAIT,IAAI,CAACU,IAAI,CAAGD,OAAO,CAAE,CACvBR,UAAU,CAAC,KAAK,CAAC,CACjBC,SAAS,CAAC,CAAC,uDAAuD,CAAC,CAAC,CACpE,MAAO,MAAK,CACd,CAEA,KAAM,CAAAS,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/B,KAAM,CAAAC,SAAS,CAAGT,IAAI,CAACU,EAAE,CAAGV,IAAI,CAACW,WAAW,CAAGf,IAAI,CAACgB,IAAI,CAExD;AACA,KAAM,CAAAC,OAAO,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAClB,IAAI,CAAC,CAAEa,SAAS,CAAE,CAAEN,IAAI,CAAEP,IAAI,CAACO,IAAK,CAAC,CAAC,CAEhEI,QAAQ,CAACQ,MAAM,CAAC,MAAM,CAAEF,OAAO,CAAC,CAChCN,QAAQ,CAACQ,MAAM,CAAC,eAAe,CAAE,UAAU,CAAC,CAE5CrB,KAAK,CAACsB,IAAI,CAAC,kDAAkD,CAAET,QAAQ,CAAC,CAACU,IAAI,CAAEC,QAAQ,EAAK,CAC1FrB,UAAU,CAAC,IAAI,CAAC,CAChBC,SAAS,CAAC,CAAC,8BAA8B,CAAC,CAAC,CAC3CC,WAAW,CAACmB,QAAQ,CAACC,IAAI,CAACC,GAAG,CAAC,CAChC,CAAC,CAAC,CACJ,CAAC,CAED,cAAe,CAAAzB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}