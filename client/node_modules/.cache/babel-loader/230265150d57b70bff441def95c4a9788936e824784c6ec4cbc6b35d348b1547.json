{"ast":null,"code":"import React,{useState,useContext,useEffect}from\"react\";import{ThemeContext}from\"../../context/Theme\";import{UserContext}from\"../../context/User\";import{SuccessContext}from\"../../context/Success\";import{AlertsContext}from\"../../context/Alerts\";import axios from\"axios\";import API from\"../../service/API\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const EditNotification=_ref=>{let{setSelected,notificationselected,setNotificationselected}=_ref;const[theme,setTheme]=useContext(ThemeContext);const[notification,setNotification]=useState(null);const[message,setMessage]=useState(\"\");const[user,setUser]=useContext(UserContext);const[title,setTitle]=useState(\"\");const[success,setSuccess]=useContext(SuccessContext);const[errors,setErrors]=useContext(AlertsContext);const authToken=localStorage.getItem(\"authToken\");const refreshToken=localStorage.getItem(\"refreshToken\");const serverUrl=process.env.REACT_APP_SERVER_URL;const[isloading,setIsloading]=useState(true);useEffect(()=>{const handleViewNotification=async()=>{setErrors([]);setSuccess(false);const config={url:`${serverUrl}/notification/view-note?note_id=${notificationselected}`,method:\"GET\",data:{}};const{res,error,loading}=await API(config);if(res){setIsloading(false);setUser(res.data.account);setNotification(res.data.notification);const notif=res.data.notification;setTitle(notif.note_title);setMessage(notif.note_message);}if(error)console.log(error);};handleViewNotification();},[]);const handleUpdateNotification=async()=>{setErrors([]);setSuccess(false);setSelected(\"Notification\");if(!message||!title){setSuccess(false);setErrors([\"Fill up all the fields!\"]);}const config={url:`${serverUrl}/notification/notification-edit`,method:\"POST\",data:{note_id:notification.note_id,title:title,message:message}};const{res,error,loading}=await API(config);if(res){setIsloading(false);setUser(res.data.account);setNotification(res.data.notification);setErrors([\"Notification updated successfully!\"]);setSuccess(true);}if(error)console.log(error);};return/*#__PURE__*/_jsxs(\"div\",{className:`col-span-8 overflow-hidden rounded-lg text-xs md:text-md w-64 px-8 sm:w-full py-10 ${theme===\"night\"?\"bg-night text-white \":\"bg-fantasy text-black\"}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between w-full\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Update Notification\"}),/*#__PURE__*/_jsx(\"button\",{id:\"btn_back_EditNotification\",onClick:()=>{setSelected(\"Notification\");},className:\"rounded-lg px-4\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-circle-chevron-left text-3xl\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col  mt-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:e=>setTitle(e.target.value),className:\"w-full border border-gray-300 rounded-lg px-2 py-1 mt-2\",placeholder:\"Title\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mt-4\",children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full h-24 border border-gray-300 rounded-lg px-2 py-1 mt-2\",value:message,onChange:e=>setMessage(e.target.value),placeholder:\"Message\"// Display notification message initially\n}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{id:\"btn_UpdateNotification\",onClick:handleUpdateNotification,className:\"hover:bg-green-700   bg-green-500 text-white rounded-lg px-4 py-2 mt-4 max-w-40\",children:\"Update Notification\"})})]})]});};","map":{"version":3,"names":["React","useState","useContext","useEffect","ThemeContext","UserContext","SuccessContext","AlertsContext","axios","API","jsx","_jsx","jsxs","_jsxs","EditNotification","_ref","setSelected","notificationselected","setNotificationselected","theme","setTheme","notification","setNotification","message","setMessage","user","setUser","title","setTitle","success","setSuccess","errors","setErrors","authToken","localStorage","getItem","refreshToken","serverUrl","process","env","REACT_APP_SERVER_URL","isloading","setIsloading","handleViewNotification","config","url","method","data","res","error","loading","account","notif","note_title","note_message","console","log","handleUpdateNotification","note_id","className","children","id","onClick","type","value","onChange","e","target","placeholder"],"sources":["D:/PUGADMAHARLIKA/Pugad-Maharlika-Frontend/client/src/pages/admin/EditNotification.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport { ThemeContext } from \"../../context/Theme\";\r\nimport { UserContext } from \"../../context/User\";\r\nimport { SuccessContext } from \"../../context/Success\";\r\nimport { AlertsContext } from \"../../context/Alerts\";\r\nimport axios from \"axios\";\r\nimport API from \"../../service/API\";\r\n\r\nexport const EditNotification = ({\r\n  setSelected,\r\n  notificationselected,\r\n  setNotificationselected,\r\n}) => {\r\n  const [theme, setTheme] = useContext(ThemeContext);\r\n  const [notification, setNotification] = useState(null);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [user, setUser] = useContext(UserContext);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [success, setSuccess] = useContext(SuccessContext);\r\n  const [errors, setErrors] = useContext(AlertsContext);\r\n  const authToken = localStorage.getItem(\"authToken\");\r\n  const refreshToken = localStorage.getItem(\"refreshToken\");\r\n  const serverUrl = process.env.REACT_APP_SERVER_URL;\r\n  const [isloading, setIsloading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const handleViewNotification = async () => {\r\n      setErrors([]);\r\n      setSuccess(false);\r\n      const config = {\r\n        url: `${serverUrl}/notification/view-note?note_id=${notificationselected}`,\r\n        method: \"GET\",\r\n        data: {},\r\n      };\r\n\r\n      const { res, error, loading } = await API(config);\r\n      if (res) {\r\n        setIsloading(false);\r\n        setUser(res.data.account);\r\n        setNotification(res.data.notification);\r\n        const notif = res.data.notification;\r\n        setTitle(notif.note_title);\r\n        setMessage(notif.note_message);\r\n      }\r\n      if (error) console.log(error);\r\n    };\r\n    handleViewNotification();\r\n  }, []);\r\n\r\n  const handleUpdateNotification = async () => {\r\n    setErrors([]);\r\n    setSuccess(false);\r\n    setSelected(\"Notification\");\r\n    if (!message || !title) {\r\n      setSuccess(false);\r\n      setErrors([\"Fill up all the fields!\"]);\r\n    }\r\n\r\n    const config = {\r\n      url: `${serverUrl}/notification/notification-edit`,\r\n      method: \"POST\",\r\n      data: {\r\n        note_id: notification.note_id,\r\n        title: title,\r\n        message: message,\r\n      },\r\n    };\r\n\r\n    const { res, error, loading } = await API(config);\r\n    if (res) {\r\n      setIsloading(false);\r\n      setUser(res.data.account);\r\n      setNotification(res.data.notification);\r\n      setErrors([\"Notification updated successfully!\"]);\r\n      setSuccess(true);\r\n    }\r\n\r\n    if (error) console.log(error);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`col-span-8 overflow-hidden rounded-lg text-xs md:text-md w-64 px-8 sm:w-full py-10 ${\r\n        theme === \"night\" ? \"bg-night text-white \" : \"bg-fantasy text-black\"\r\n      }`}\r\n    >\r\n      <div className=\"flex justify-between w-full\">\r\n        <h1 className=\"text-2xl font-bold\">Update Notification</h1>\r\n        <button\r\n          id=\"btn_back_EditNotification\"\r\n          onClick={() => {\r\n            setSelected(\"Notification\");\r\n          }}\r\n          className=\"rounded-lg px-4\"\r\n        >\r\n          <i className=\"fa-solid fa-circle-chevron-left text-3xl\"></i>\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"flex flex-col  mt-8\">\r\n        <h1 className=\"text-2xl font-bold\">Title</h1>\r\n        <input\r\n          type=\"text\"\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)}\r\n          className=\"w-full border border-gray-300 rounded-lg px-2 py-1 mt-2\"\r\n          placeholder=\"Title\"\r\n        />\r\n\r\n        <h1 className=\"text-2xl font-bold mt-4\">Message</h1>\r\n        <textarea\r\n          className=\"w-full h-24 border border-gray-300 rounded-lg px-2 py-1 mt-2\"\r\n          value={message}\r\n          onChange={(e) => setMessage(e.target.value)}\r\n          placeholder=\"Message\" // Display notification message initially\r\n        ></textarea>\r\n\r\n        <div className=\"flex justify-end\">\r\n          <button\r\n            id=\"btn_UpdateNotification\"\r\n            onClick={handleUpdateNotification}\r\n            className=\"hover:bg-green-700   bg-green-500 text-white rounded-lg px-4 py-2 mt-4 max-w-40\"\r\n          >\r\n            Update Notification\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}