{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nconst serverUrl = process.env.REACT_APP_SERVER_URL;\nfunction useAuthCheck() {\n  _s();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const authToken = localStorage.getItem(\"authToken\");\n    const refreshToken = localStorage.getItem(\"refreshToken\");\n    if (!authToken || !refreshToken) {\n      navigate(\"/\");\n      return; // Exit early if no tokens\n    }\n    axios.post(`${serverUrl}/auth/verify`, {}, {\n      headers: {\n        \"x-auth-token\": authToken,\n        \"x-refresh-token\": refreshToken\n      }\n    }).then(response => {\n      localStorage.setItem(\"authToken\", response.data.token);\n    }).catch(error => {\n      navigate(\"/\");\n      console.error(error.response ? error.response.data : error.message);\n    });\n  }, [navigate]); // Add navigate to dependencies\n}\n_s(useAuthCheck, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\nexport default useAuthCheck;","map":{"version":3,"names":["useEffect","useNavigate","axios","serverUrl","process","env","REACT_APP_SERVER_URL","useAuthCheck","_s","navigate","authToken","localStorage","getItem","refreshToken","post","headers","then","response","setItem","data","token","catch","error","console","message"],"sources":["D:/PUGADMAHARLIKA/Pugad-Maharlika-Frontend/client/src/hooks/useAuthCheck.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst serverUrl = process.env.REACT_APP_SERVER_URL;\r\n\r\nfunction useAuthCheck() {\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const authToken = localStorage.getItem(\"authToken\");\r\n    const refreshToken = localStorage.getItem(\"refreshToken\");\r\n    if (!authToken || !refreshToken) {\r\n      navigate(\"/\");\r\n      return; // Exit early if no tokens\r\n    }\r\n\r\n    axios\r\n      .post(\r\n        `${serverUrl}/auth/verify`,\r\n        {},\r\n        {\r\n          headers: {\r\n            \"x-auth-token\": authToken,\r\n            \"x-refresh-token\": refreshToken,\r\n          },\r\n        }\r\n      )\r\n      .then((response) => {\r\n        localStorage.setItem(\"authToken\", response.data.token);\r\n      })\r\n      .catch((error) => {\r\n        navigate(\"/\");\r\n        console.error(error.response ? error.response.data : error.message);\r\n      });\r\n  }, [navigate]); // Add navigate to dependencies\r\n}\r\n\r\nexport default useAuthCheck;\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,SAAS,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB;AAElD,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EACtB,MAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,MAAMU,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IACnD,MAAMC,YAAY,GAAGF,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IACzD,IAAI,CAACF,SAAS,IAAI,CAACG,YAAY,EAAE;MAC/BJ,QAAQ,CAAC,GAAG,CAAC;MACb,OAAO,CAAC;IACV;IAEAP,KAAK,CACFY,IAAI,CACH,GAAGX,SAAS,cAAc,EAC1B,CAAC,CAAC,EACF;MACEY,OAAO,EAAE;QACP,cAAc,EAAEL,SAAS;QACzB,iBAAiB,EAAEG;MACrB;IACF,CACF,CAAC,CACAG,IAAI,CAAEC,QAAQ,IAAK;MAClBN,YAAY,CAACO,OAAO,CAAC,WAAW,EAAED,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;IACxD,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;MAChBb,QAAQ,CAAC,GAAG,CAAC;MACbc,OAAO,CAACD,KAAK,CAACA,KAAK,CAACL,QAAQ,GAAGK,KAAK,CAACL,QAAQ,CAACE,IAAI,GAAGG,KAAK,CAACE,OAAO,CAAC;IACrE,CAAC,CAAC;EACN,CAAC,EAAE,CAACf,QAAQ,CAAC,CAAC,CAAC,CAAC;AAClB;AAACD,EAAA,CA9BQD,YAAY;EAAA,QACFN,WAAW;AAAA;AA+B9B,eAAeM,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}